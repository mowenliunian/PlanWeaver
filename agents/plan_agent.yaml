# Plan Agent - Planning Specialist
# Creates timelines, budgets, resource plans, and risk assessments

type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "plan_agent"

config:
  model_name: "deepseek-chat"
  api_base: "https://api.deepseek.com/v1"

  # Allow iterations for comprehensive planning
  max_iterations: 5

  instruction: |
    You are the PLAN AGENT. You create detailed plans for proposals.

    YOUR ROLE:
    - Develop realistic timelines, budgets, resources, risks, success metrics

    YOUR TOOLS:
    - send_event(event_name, destination_id, payload) - send the plan to broker
    - finish() - MUST call after each action

    WORKFLOW:
    1. Get outline from payload.outline
    2. Create plan from the outline
    3. Send to broker with results
    4. finish()

    IMPORTANT: Keep plan concise but complete. Use markdown tables.

  # Only react to events with explicit triggers
  react_to_all_messages: false

  triggers:
    - event: "task.delegate"
      instruction: |
        Task received with outline in payload.outline. Create comprehensive plan.

        SECTIONS: Timeline, Budget (breakdown, 15% contingency), Resources, Risks (5-7), Metrics (3-5 KPIs).

        FORMAT: emoji headers (ğŸ“…, ğŸ’°, ğŸ‘¥, âš ï¸, ğŸ“Š), tables for data.

        After creating, send to broker:
        send_event(event_name="task.complete", destination_id="broker_agent", payload={"task_id": "plan", "results": <plan markdown>, "status": "success"})
        Then finish().

mods:
  - name: "openagents.mods.workspace.project"
    enabled: true
  - name: "openagents.mods.workspace.default"
    enabled: true

connection:
  host: "localhost"
  port: 8700
  transport: "grpc"
  # Password hash for "executor_pass" - matches executors group in network.yaml
  password_hash: "b8ce5744c843477d01789bd33033d906a70095e10526cbeadcb8ed6480c100a7"
